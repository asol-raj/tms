<div class="container-fluid">
    <div class="row mt-2 py-2 align-items-center">
        <div class="col-12 col-xl-3 mb-3 mb-xl-0">
            <span class="mb-0 fs-3 text-primary">DAILY TASKS</span>
        </div>

        <div class="col-12 col-xl-9">
            <div class="d-flex justify-content-between justify-content-xl-end align-items-center gap-3">
                <select name="" id="sYears" class="form-select" style="width: 150px;"></select>
                <select name="" id="sMonth" class="form-select" style="width: 150px;"></select>

                <button class="btn btn-primary viewReport">View (Late Report)</button>
                <div class="btn-group">
                    <butotn class="btn btn-light last" title="Previous Date"><i class="bi bi-caret-left-fill"></i></butotn>
                    <!-- <button class="btn btn-light next disabled" title="Next Date"><i class="bi bi-caret-right-fill"></i></button> -->
                </div>
                
                <input type="date" name="" id="inputDate" class="form-control me-auto me-md-0" style="width: 180px;">

                <? if(user.role !== 'user'){ ?>
                <select name="users" id="selectUser" class="form-select" style="width: 180px;"></select>
                <? } ?>


                <? if(user.role !== 'user'){ ?>
                <!-- <button class="btn btn-bd-primary px-md-4 border-2" id="createDailyTask" title="Create Daily Task"><i
                        class="bi bi-plus-lg"></i> TASK</button> -->
                <? } ?>
            </div>
        </div>
    </div>
</div>
<hr>
<div class="container-fluid">
    <div class="dataTable table-responsive mb-4" id="dataTable"></div>
</div>
<!-- filter keys template-->
<div id="filterDropdown" class="position-absolute border bg-white p-2 rounded shadow small d-print-none"
    style="display:none; z-index:1050; width:250px; max-height:300px;" tabindex="-1">
    <input type="text" class="form-control form-control-sm mb-2" id="filterSearch" placeholder="Search..." />
    <div id="filterItems" class="overflow-auto" style="max-height:180px;"></div>
    <div class="d-flex justify-content-between gap-1 mt-2">
        <button class="btn btn-sm btn-outline-secondary me-auto" id="clearFilter">Clear</button>
        <button class="btn btn-sm btn-outline-secondary" id="applyFilter">Apply</button>
        <button class="btn btn-sm btn-outline-secondary" id="cancelFilter">Cancel</button>
    </div>
</div>

<!-- Remark Modal (reused) -->
<div id="remarkModal" class="modal" aria-hidden="true" role="dialog" style="display:none;">
    <div class="modal-content" role="document"
        style="max-width:600px;margin:2rem auto;padding:1rem;border-radius:8px;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.12);">
        <h4 id="remarkModalTitle">Add / Edit Remark</h4>
        <form id="remarkForm">
            <input type="hidden" id="rm_task_id" name="task_id">
            <label for="rm_for_date">For date</label>
            <input id="rm_for_date" name="for_date" type="date" style="width:100%;margin-bottom:.5rem;" />
            <label for="rm_remarks">Remarks (optional)</label>
            <textarea id="rm_remarks" name="remarks" rows="5" maxlength="2000" style="width:100%;"></textarea>

            <div style="display:flex;gap:.5rem;justify-content:flex-end;margin-top:.5rem;">
                <button type="button" id="rm_cancel" class="btn btn-secondary">Cancel</button>
                <button type="submit" id="rm_save" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Custom context menu -->
<div id="taskContextMenu"
    style="position:fixed;display:none;z-index:9999;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 6px 18px rgba(0,0,0,.12);">
    <div class="ctx-item" data-action="add-remark" style="padding:.5rem 1rem;cursor:pointer;">Add / Edit Remark</div>
    <div class="ctx-item" data-action="view-remark" style="padding:.5rem 1rem;cursor:pointer;">View Remark</div>
</div>


<input type="hidden" name="user_id" id="userId" value="<?=user.id ?>">
<script src="/_libs/flatpickr.js"></script>
<script type="module" src="/js/dailytasks.js"></script>

<!-- <script type="module" src="/js/completetasks.js"></script> -->